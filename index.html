<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ly Music Player</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-[#121212] text-white flex justify-center items-center min-h-screen p-4 font-sans">
  <div class="w-full max-w-md bg-[#181818] rounded-2xl shadow-2xl p-6 space-y-6">
    <!-- Header -->
    <div class="text-center">
      <h1 class="text-2xl font-bold text-green-500">Ly Music Player</h1>
      <p class="text-gray-400 text-sm">Feel Free The Rhythms</p>
    </div>

    <!-- Albums Artists + Informations -->
    <div class="flex flex-col items-center text-center space-y-3">
      <img id="cover" src="https://via.placeholder.com/300" alt="Album Cover"
           class="w-52 h-52 rounded-full shadow-lg object-cover border-4 border-[#282828]">
      <div>
        <h2 id="title" class="text-xl font-semibold">Select a Song</h2>
        <p id="artist" class="text-gray-400 text-sm">Artist</p>
      </div>
    </div>

    <!-- Progress Section -->
    <div class="space-y-1">
      <div class="w-full bg-[#2a2a2a] h-1.5 rounded-full overflow-hidden cursor-pointer relative" id="progressContainer">
        <div id="progress" class="bg-green-500 h-1.5 rounded-full w-0 transition-all duration-200 ease-linear"></div>
      </div>
      <div class="flex justify-between text-xs text-gray-400">
        <span id="current-time">0:00</span>
        <span id="duration">0:00</span>
      </div>
    </div>

    <!-- Controls -->
    <div class="flex justify-center items-center gap-8">
      <button id="prev" class="hover:text-green-500 transition">
        <i data-lucide="skip-back" class="w-6 h-6"></i>
      </button>

      <button id="play"
        class="bg-green-500 text-black rounded-full w-16 h-16 flex items-center justify-center hover:scale-105 active:scale-95 transition-all shadow-lg">
        <i id="playIcon" data-lucide="play" class="w-8 h-8"></i>
      </button>

      <button id="next" class="hover:text-green-500 transition">
        <i data-lucide="skip-forward" class="w-6 h-6"></i>
      </button>
    </div>

    <!-- Playlist -->
    <div class="bg-[#121212] rounded-xl p-3 max-h-44 overflow-y-auto border border-[#282828]">
      <ul id="playlist" class="text-gray-300 text-sm divide-y divide-[#2a2a2a] cursor-pointer"></ul>
    </div>
  </div>

  <audio id="audio"></audio>

  <script>
    lucide.createIcons();

    const songs = [
      { title: "Dreams", artist: "Joakim Karud", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3", cover: "https://picsum.photos/id/1016/300/300" },
      { title: "Sunny", artist: "KODOMOi", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3", cover: "https://picsum.photos/id/1025/300/300" },
      { title: "Skyline", artist: "LAKEY INSPIRED", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3", cover: "https://picsum.photos/id/1032/300/300" }
    ];

    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('play');
    const playIcon = document.getElementById('playIcon');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    const titleEl = document.getElementById('title');
    const artistEl = document.getElementById('artist');
    const coverEl = document.getElementById('cover');
    const playlistEl = document.getElementById('playlist');
    const progressEl = document.getElementById('progress');
    const progressContainer = document.getElementById('progressContainer');
    const currentTimeEl = document.getElementById('current-time');
    const durationEl = document.getElementById('duration');

    let currentSongIndex = 0;
    let isPlaying = false;

    // Populate Playlist
    songs.forEach((song, index) => {
      const li = document.createElement('li');
      li.textContent = `${song.title} - ${song.artist}`;
      li.className = "py-2 px-2 hover:text-green-400 transition";
      li.addEventListener('click', () => {
        currentSongIndex = index;
        loadSong(songs[currentSongIndex]);
        playMusic();
        highlightActiveSong();
      });
      playlistEl.appendChild(li);
    });

    function loadSong(song) {
      titleEl.textContent = song.title;
      artistEl.textContent = song.artist;
      coverEl.src = song.cover;
      audio.src = song.src;
    }

    function playMusic() {
      isPlaying = true;
      audio.play().catch(console.error);
      updatePlayIcon("pause");
    }

    function pauseMusic() {
      isPlaying = false;
      audio.pause();
      updatePlayIcon("play");
    }

    function updatePlayIcon(iconName) {
      const newIcon = document.createElement("i");
      newIcon.setAttribute("data-lucide", iconName);
      newIcon.classList.add("w-8", "h-8");
      newIcon.id = "playIcon";
      playBtn.innerHTML = "";
      playBtn.appendChild(newIcon);
      lucide.createIcons();
    }

    playBtn.addEventListener('click', () => {
      isPlaying ? pauseMusic() : playMusic();
    });

    nextBtn.addEventListener('click', () => {
      currentSongIndex = (currentSongIndex + 1) % songs.length;
      loadSong(songs[currentSongIndex]);
      playMusic();
      highlightActiveSong();
    });

    prevBtn.addEventListener('click', () => {
      currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
      loadSong(songs[currentSongIndex]);
      playMusic();
      highlightActiveSong();
    });

    // Format Time As mm:ss
    function formatTime(time) {
      const minutes = Math.floor(time / 60);
      const seconds = Math.floor(time % 60).toString().padStart(2, '0');
      return `${minutes}:${seconds}`;
    }

    // Update Progress And Time
    audio.addEventListener('timeupdate', () => {
      if (audio.duration) {
        const progressPercent = (audio.currentTime / audio.duration) * 100;
        progressEl.style.width = progressPercent + "%";
        currentTimeEl.textContent = formatTime(audio.currentTime);
        durationEl.textContent = formatTime(audio.duration);
      }
    });

    // Click To Skip Through Progress Bar
    progressContainer.addEventListener('click', (e) => {
      const width = progressContainer.clientWidth;
      const clickX = e.offsetX;
      const duration = audio.duration;
      audio.currentTime = (clickX / width) * duration;
    });

    // Song Ends -> Go Next
    audio.addEventListener('ended', () => nextBtn.click());

    // Highlight Current Song
    function highlightActiveSong() {
      const allSongs = playlistEl.querySelectorAll("li");
      allSongs.forEach((li, i) => {
        li.classList.remove("text-green-400");
        if (i === currentSongIndex) li.classList.add("text-green-400");
      });
    }

    loadSong(songs[currentSongIndex]);
    highlightActiveSong();
  </script>
</body>
</html>